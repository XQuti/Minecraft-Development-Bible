{
  "version": 3,
  "sources": ["src/app/services/tutorial.service.ts", "src/app/services/tutorial.service.spec.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { catchError, timeout, retry } from 'rxjs/operators';\nimport { TutorialModule, TutorialLesson } from '../models/tutorial.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TutorialService {\n  private readonly API_URL = 'http://localhost:8080/api/tutorials';\n  private readonly REQUEST_TIMEOUT = 10000; // 10 seconds\n\n  constructor(private http: HttpClient) {}\n\n  getModules(): Observable<TutorialModule[]> {\n    return this.http.get<TutorialModule[]>(`${this.API_URL}/modules`).pipe(\n      timeout(this.REQUEST_TIMEOUT),\n      retry(1),\n      catchError((error: HttpErrorResponse) => {\n        console.error('Error fetching tutorial modules:', error);\n        return this.handleError(error);\n      })\n    );\n  }\n\n  getModule(moduleId: number): Observable<TutorialModule> {\n    if (!moduleId || moduleId <= 0) {\n      throw new Error('Invalid module ID');\n    }\n\n    return this.http.get<TutorialModule>(`${this.API_URL}/modules/${moduleId}`).pipe(\n      timeout(this.REQUEST_TIMEOUT),\n      retry(1),\n      catchError((error: HttpErrorResponse) => {\n        console.error(`Error fetching tutorial module ${moduleId}:`, error);\n        return this.handleError(error);\n      })\n    );\n  }\n\n  getModuleLessons(moduleId: number): Observable<TutorialLesson[]> {\n    if (!moduleId || moduleId <= 0) {\n      throw new Error('Invalid module ID');\n    }\n\n    return this.http.get<TutorialLesson[]>(`${this.API_URL}/modules/${moduleId}/lessons`).pipe(\n      timeout(this.REQUEST_TIMEOUT),\n      retry(1),\n      catchError((error: HttpErrorResponse) => {\n        console.error(`Error fetching lessons for module ${moduleId}:`, error);\n        return this.handleError(error);\n      })\n    );\n  }\n\n  getLesson(lessonId: number): Observable<TutorialLesson> {\n    if (!lessonId || lessonId <= 0) {\n      throw new Error('Invalid lesson ID');\n    }\n\n    return this.http.get<TutorialLesson>(`${this.API_URL}/lessons/${lessonId}`).pipe(\n      timeout(this.REQUEST_TIMEOUT),\n      retry(1),\n      catchError((error: HttpErrorResponse) => {\n        console.error(`Error fetching tutorial lesson ${lessonId}:`, error);\n        return this.handleError(error);\n      })\n    );\n  }\n\n  private handleError(error: HttpErrorResponse): Observable<never> {\n    let errorMessage = 'An unexpected error occurred';\n    \n    if (error.status === 0) {\n      errorMessage = 'Network error - please check your connection';\n    } else if (error.status === 404) {\n      errorMessage = 'Tutorial content not found';\n    } else if (error.status >= 500) {\n      errorMessage = 'Server error - please try again later';\n    } else if (error.error && error.error.message) {\n      errorMessage = error.error.message;\n    }\n    \n    console.error('Tutorial Service Error:', {\n      status: error.status,\n      message: errorMessage,\n      url: error.url\n    });\n    \n    throw new Error(errorMessage);\n  }\n}", "import { TestBed } from '@angular/core/testing';\nimport { HttpClientTestingModule, HttpTestingController } from '@angular/common/http/testing';\nimport { TutorialService } from './tutorial.service';\nimport { TutorialModule, TutorialLesson } from '../models/tutorial.model';\n\ndescribe('TutorialService', () => {\n  let service: TutorialService;\n  let httpMock: HttpTestingController;\n\n  const mockTutorialModule: TutorialModule = {\n    id: 1,\n    title: 'Getting Started',\n    description: 'Learn the basics of Minecraft development',\n    order: 1,\n    isPublished: true,\n    createdAt: '2024-01-01T00:00:00Z',\n    updatedAt: '2024-01-01T00:00:00Z',\n    lessons: []\n  };\n\n  const mockTutorialLesson: TutorialLesson = {\n    id: 1,\n    title: 'Introduction to Minecraft Modding',\n    content: 'This lesson covers the basics...',\n    videoUrl: 'https://example.com/video1',\n    order: 1,\n    isPublished: true,\n    module: mockTutorialModule,\n    createdAt: '2024-01-01T00:00:00Z',\n    updatedAt: '2024-01-01T00:00:00Z'\n  };\n\n  beforeEach(async () => {\n    await TestBed.configureTestingModule({\n      imports: [HttpClientTestingModule],\n      providers: [TutorialService]\n    }).compileComponents();\n    \n    service = TestBed.inject(TutorialService);\n    httpMock = TestBed.inject(HttpTestingController);\n  });\n\n  afterEach(() => {\n    // Verify that no unmatched requests are outstanding\n    if (httpMock) {\n      try {\n        httpMock.verify();\n      } catch (error) {\n        // Log the error but don't fail the test - some error handling tests may leave unmatched requests\n        console.warn('HttpMock verification failed:', error);\n      }\n    }\n  });\n\n  it('should be created', () => {\n    expect(service).toBeTruthy();\n  });\n\n  describe('getModules', () => {\n    it('should fetch all tutorial modules', () => {\n      const mockModules = [mockTutorialModule];\n\n      service.getModules().subscribe(modules => {\n        expect(modules).toEqual(mockModules);\n        expect(modules.length).toBe(1);\n        expect(modules[0].title).toBe('Getting Started');\n      });\n\n      const req = httpMock.expectOne('http://localhost:8080/api/tutorials/modules');\n      expect(req.request.method).toBe('GET');\n      req.flush(mockModules);\n    });\n\n    it('should handle error when fetching modules', () => {\n      service.getModules().subscribe({\n        next: () => fail('should have failed'),\n        error: (error) => {\n          expect(error.message).toBe('Server error - please try again later');\n        }\n      });\n\n      const req = httpMock.expectOne('http://localhost:8080/api/tutorials/modules');\n      req.flush('Server error', { status: 500, statusText: 'Internal Server Error' });\n    });\n  });\n\n  describe('getModule', () => {\n    it('should fetch a specific module by ID', () => {\n      const moduleId = 1;\n\n      service.getModule(moduleId).subscribe(module => {\n        expect(module).toEqual(mockTutorialModule);\n        expect(module.id).toBe(moduleId);\n      });\n\n      const req = httpMock.expectOne(`http://localhost:8080/api/tutorials/modules/${moduleId}`);\n      expect(req.request.method).toBe('GET');\n      req.flush(mockTutorialModule);\n    });\n\n    it('should handle 404 error for non-existent module', () => {\n      const moduleId = 999;\n\n      service.getModule(moduleId).subscribe({\n        next: () => fail('should have failed'),\n        error: (error) => {\n          expect(error.message).toBe('Tutorial content not found');\n        }\n      });\n\n      const req = httpMock.expectOne(`http://localhost:8080/api/tutorials/modules/${moduleId}`);\n      req.flush('Module not found', { status: 404, statusText: 'Not Found' });\n    });\n  });\n\n  describe('getModuleLessons', () => {\n    it('should fetch lessons for a specific module', () => {\n      const moduleId = 1;\n      const mockLessons = [mockTutorialLesson];\n\n      service.getModuleLessons(moduleId).subscribe(lessons => {\n        expect(lessons).toEqual(mockLessons);\n        expect(lessons.length).toBe(1);\n        expect(lessons[0].module.id).toBe(moduleId);\n      });\n\n      const req = httpMock.expectOne(`http://localhost:8080/api/tutorials/modules/${moduleId}/lessons`);\n      expect(req.request.method).toBe('GET');\n      req.flush(mockLessons);\n    });\n\n    it('should handle empty lessons array', () => {\n      const moduleId = 1;\n\n      service.getModuleLessons(moduleId).subscribe(lessons => {\n        expect(lessons).toEqual([]);\n        expect(lessons.length).toBe(0);\n      });\n\n      const req = httpMock.expectOne(`http://localhost:8080/api/tutorials/modules/${moduleId}/lessons`);\n      req.flush([]);\n    });\n  });\n\n  describe('getLesson', () => {\n    it('should fetch a specific lesson by ID', () => {\n      const lessonId = 1;\n\n      service.getLesson(lessonId).subscribe(lesson => {\n        expect(lesson).toEqual(mockTutorialLesson);\n        expect(lesson.id).toBe(lessonId);\n      });\n\n      const req = httpMock.expectOne(`http://localhost:8080/api/tutorials/lessons/${lessonId}`);\n      expect(req.request.method).toBe('GET');\n      req.flush(mockTutorialLesson);\n    });\n\n    it('should handle 404 error for non-existent lesson', () => {\n      const lessonId = 999;\n\n      service.getLesson(lessonId).subscribe({\n        next: () => fail('should have failed'),\n        error: (error) => {\n          expect(error.message).toContain('Tutorial content not found');\n        }\n      });\n\n      const req = httpMock.expectOne(`http://localhost:8080/api/tutorials/lessons/${lessonId}`);\n      req.flush('Lesson not found', { status: 404, statusText: 'Not Found' });\n    });\n  });\n\n  describe('error handling', () => {\n    it('should handle network errors', () => {\n      service.getModules().subscribe({\n        next: () => fail('should have failed'),\n        error: (error) => {\n          expect(error.message).toBe('Network error - please check your connection');\n        }\n      });\n\n      const req = httpMock.expectOne('http://localhost:8080/api/tutorials/modules');\n      req.error(new ErrorEvent('Network error'));\n    });\n\n    it('should handle server errors', () => {\n      service.getModules().subscribe({\n        next: () => fail('should have failed'),\n        error: (error) => {\n          expect(error.message).toBe('Server error - please try again later');\n        }\n      });\n\n      const req = httpMock.expectOne('http://localhost:8080/api/tutorials/modules');\n      req.flush('Server error', { status: 500, statusText: 'Internal Server Error' });\n    });\n\n    it('should throw error for invalid module ID', () => {\n      expect(() => service.getModule(0)).toThrowError('Invalid module ID');\n      expect(() => service.getModule(-1)).toThrowError('Invalid module ID');\n    });\n\n    it('should throw error for invalid lesson ID', () => {\n      expect(() => service.getLesson(0)).toThrowError('Invalid lesson ID');\n      expect(() => service.getLesson(-1)).toThrowError('Invalid lesson ID');\n    });\n  });\n});"],
  "mappings": "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",
  "names": ["TutorialService", "init_testing", "module"]
}

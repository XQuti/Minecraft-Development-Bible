import{a as P,b as j,c as O,d as W,e as q,f as z,g as B,h as R,i as G,j as U}from"./chunk-JRH75BT2.js";import{a as H}from"./chunk-7XMZ43RN.js";import{A as f,D as s,H as t,I as r,J as x,K as w,L as v,M as m,N as _,O as d,P as h,Q as g,R as y,S as T,T as C,W as F,Y as L,da as M,ea as V,fa as N,h as p,i as u,j as S,k as E,pa as D,r as I,ra as A,t as a,v as b,w as k}from"./chunk-MRSHGPQQ.js";import"./chunk-3YTOVYWG.js";var K=i=>["/forums/threads",i];function Q(i,n){if(i&1){let e=w();t(0,"button",12),v("click",function(){p(e);let o=m();return u(o.showCreateForm=!o.showCreateForm)}),d(1),r()}if(i&2){let e=m();a(),g(" ",e.showCreateForm?"Cancel":"New Thread"," ")}}function X(i,n){i&1&&(t(0,"a",13),d(1," Login to Post "),r())}function Y(i,n){if(i&1){let e=w();t(0,"div",14)(1,"h3",15),d(2,"Create New Thread"),r(),t(3,"form",16,1),v("ngSubmit",function(){p(e);let o=m();return u(o.createThread())}),t(5,"div",17)(6,"label",18),d(7,"Title"),r(),t(8,"input",19),C("ngModelChange",function(o){p(e);let c=m();return T(c.newThread.title,o)||(c.newThread.title=o),u(o)}),r()(),t(9,"div",17)(10,"label",20),d(11,"Content"),r(),t(12,"textarea",21),C("ngModelChange",function(o){p(e);let c=m();return T(c.newThread.content,o)||(c.newThread.content=o),u(o)}),r()(),t(13,"div",22)(14,"button",23),v("click",function(){p(e);let o=m();return o.showCreateForm=!1,u(o.resetForm())}),d(15," Cancel "),r(),t(16,"button",24),d(17),r()()()()}if(i&2){let e=_(4),l=m();a(8),y("ngModel",l.newThread.title),a(4),y("ngModel",l.newThread.content),a(4),s("disabled",!e.valid||l.creating),a(),g(" ",l.creating?"Creating...":"Create Thread"," ")}}function Z(i,n){if(i&1&&(t(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31)(4,"h3",32)(5,"a",33),d(6),r()(),t(7,"div",34)(8,"div",35),x(9,"img",36),t(10,"span"),d(11),r()(),t(12,"span"),d(13,"\u2022"),r(),t(14,"span"),d(15),r(),t(16,"span"),d(17,"\u2022"),r(),t(18,"span"),d(19),r()(),t(20,"p",37),d(21),r()(),t(22,"div",38)(23,"div",39),d(24,"Last activity"),r(),t(25,"div",40),d(26),r()()()()()),i&2){let e=n.$implicit,l=m(2);a(5),s("routerLink",F(9,K,e.id)),a(),g(" ",e.title," "),a(3),s("src",e.author.avatarUrl||"/assets/default-avatar.png",I)("alt",e.author.username),a(2),h(e.author.username),a(4),h(l.formatDate(e.createdAt)),a(4),g("",e.postCount||0," replies"),a(2),h(l.getThreadPreview(e)),a(5),h(l.formatDate(e.lastActivity||e.createdAt))}}function $(i,n){i&1&&(t(0,"div",41)(1,"div",42),S(),t(2,"svg",43),x(3,"path",44),r(),E(),t(4,"p",45),d(5,"No threads yet"),r(),t(6,"p"),d(7,"Be the first to start a discussion!"),r()()())}function ee(i,n){if(i&1&&(t(0,"div",25),f(1,Z,27,11,"div",26)(2,$,8,0,"div",27),r()),i&2){let e=m();a(),s("ngForOf",e.threads),a(),s("ngIf",e.threads.length===0)}}function te(i,n){i&1&&(t(0,"div",46),x(1,"div",47),r())}function re(i,n){if(i&1&&(t(0,"div",48)(1,"p",49),d(2),r()()),i&2){let e=m();a(2),h(e.error)}}var J=class i{constructor(n,e){this.forumService=n;this.authService=e}threads=[];loading=!0;error=null;showCreateForm=!1;creating=!1;newThread={title:"",content:""};ngOnInit(){this.loadThreads()}loadThreads(){this.forumService.getThreads().subscribe({next:n=>{this.threads=n.content||[],this.loading=!1},error:n=>{this.error="Failed to load forum threads. Please try again later.",this.loading=!1,console.error("Error loading threads:",n)}})}createThread(){!this.newThread.title.trim()||!this.newThread.content.trim()||(this.creating=!0,this.forumService.createThread({title:this.newThread.title,content:this.newThread.content}).subscribe({next:n=>{this.threads.unshift(n),this.showCreateForm=!1,this.resetForm(),this.creating=!1},error:n=>{this.error="Failed to create thread. Please try again.",this.creating=!1,console.error("Error creating thread:",n)}}))}resetForm(){this.newThread={title:"",content:""}}formatDate(n){let e=new Date(n),o=Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60));return o<1?"Just now":o<24?`${o}h ago`:o<168?`${Math.floor(o/24)}d ago`:e.toLocaleDateString()}getThreadPreview(n){return n.content||"Click to view thread content..."}static \u0275fac=function(e){return new(e||i)(b(U),b(H))};static \u0275cmp=k({type:i,selectors:[["app-thread-list"]],decls:15,vars:6,consts:[["loadingTemplate",""],["threadForm","ngForm"],[1,"container","mx-auto","px-4","py-8"],[1,"max-w-6xl","mx-auto"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-4xl","font-bold","text-minecraft-green","mb-2"],[1,"text-gray-600"],["class","bg-minecraft-green text-white px-6 py-2 rounded hover:bg-minecraft-dark transition-colors duration-200",3,"click",4,"ngIf"],["href","/api/oauth2/authorization/google","class","bg-minecraft-green text-white px-6 py-2 rounded hover:bg-minecraft-dark transition-colors duration-200",4,"ngIf"],["class","bg-white rounded-lg shadow-md p-6 mb-8 border border-gray-200",4,"ngIf"],["class","space-y-4",4,"ngIf","ngIfElse"],["class","bg-red-50 border border-red-200 rounded-lg p-4 mt-6",4,"ngIf"],[1,"bg-minecraft-green","text-white","px-6","py-2","rounded","hover:bg-minecraft-dark","transition-colors","duration-200",3,"click"],["href","/api/oauth2/authorization/google",1,"bg-minecraft-green","text-white","px-6","py-2","rounded","hover:bg-minecraft-dark","transition-colors","duration-200"],[1,"bg-white","rounded-lg","shadow-md","p-6","mb-8","border","border-gray-200"],[1,"text-xl","font-semibold","text-minecraft-dark","mb-4"],[3,"ngSubmit"],[1,"mb-4"],["for","title",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","title","name","title","required","","maxlength","200","placeholder","Enter thread title...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-minecraft-green","focus:border-transparent",3,"ngModelChange","ngModel"],["for","content",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","content","name","content","required","","rows","6","placeholder","Describe your question or topic...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-minecraft-green","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-gray-600","bg-gray-100","rounded","hover:bg-gray-200","transition-colors","duration-200",3,"click"],["type","submit",1,"px-4","py-2","bg-minecraft-green","text-white","rounded","hover:bg-minecraft-dark","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","duration-200",3,"disabled"],[1,"space-y-4"],["class","bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 border border-gray-200",4,"ngFor","ngForOf"],["class","text-center py-12",4,"ngIf"],[1,"bg-white","rounded-lg","shadow-md","hover:shadow-lg","transition-shadow","duration-300","border","border-gray-200"],[1,"p-6"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"text-xl","font-semibold","text-minecraft-dark","mb-2"],[1,"hover:text-minecraft-green",3,"routerLink"],[1,"flex","items-center","space-x-4","text-sm","text-gray-500","mb-3"],[1,"flex","items-center","space-x-2"],[1,"w-6","h-6","rounded-full",3,"src","alt"],[1,"text-gray-600","line-clamp-2"],[1,"ml-4","text-right"],[1,"text-sm","text-gray-500"],[1,"text-sm","font-medium"],[1,"text-center","py-12"],[1,"text-gray-500","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"],[1,"text-lg"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-minecraft-green"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mt-6"],[1,"text-red-600"]],template:function(e,l){if(e&1&&(t(0,"div",2)(1,"div",3)(2,"div",4)(3,"div")(4,"h1",5),d(5,"Community Forum"),r(),t(6,"p",6),d(7,"Ask questions, share knowledge, and connect with other developers."),r()(),f(8,Q,2,1,"button",7)(9,X,2,0,"a",8),r(),f(10,Y,18,4,"div",9)(11,ee,3,2,"div",10)(12,te,2,0,"ng-template",null,0,L)(14,re,3,1,"div",11),r()()),e&2){let o=_(13);a(8),s("ngIf",l.authService.isAuthenticated()),a(),s("ngIf",!l.authService.isAuthenticated()),a(),s("ngIf",l.showCreateForm),a(),s("ngIf",!l.loading)("ngIfElse",o),a(3),s("ngIf",l.error)}},dependencies:[N,M,V,A,D,G,z,P,j,O,B,R,q,W],styles:[".line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}"]})};export{J as ThreadListComponent};

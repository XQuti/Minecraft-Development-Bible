import{a as O}from"./chunk-ICGE3QQ3.js";import{A as u,D as s,H as o,I as r,J as p,K as _,L as h,M as l,N as y,O as a,P as m,Q as M,W as b,Y as T,ea as S,fa as k,h as g,i as f,j as x,k as L,ma as E,pa as V,q as I,ra as P,s as C,t as i,v,w}from"./chunk-MRSHGPQQ.js";import"./chunk-3YTOVYWG.js";var R=n=>["/tutorials/modules",n];function j(n,t){if(n&1&&(o(0,"li")(1,"a",16),a(2),r()()),n&2){let e=l(2);i(),s("routerLink",b(2,R,e.module.id)),i(),m(e.module.title)}}function D(n,t){if(n&1&&(o(0,"p",20),a(1),r()),n&2){let e=l(3);i(),M("Part of ",e.module.title,"")}}function F(n,t){if(n&1&&(o(0,"div",17)(1,"h1",18),a(2),r(),u(3,D,2,1,"p",19),r()),n&2){let e=l(2);i(2),m(e.currentLesson.title),i(),s("ngIf",e.module)}}function N(n,t){if(n&1&&(o(0,"div",17)(1,"div",21),p(2,"iframe",22),r()()),n&2){let e=l(2);i(2),s("src",e.getVideoEmbedUrl(e.currentLesson.videoUrl),C)}}function H(n,t){if(n&1&&(o(0,"div",23),p(1,"div",24),r()),n&2){let e=l(2);i(),s("innerHTML",e.getFormattedContent(e.currentLesson.content),I)}}function z(n,t){if(n&1){let e=_();o(0,"button",25),h("click",function(){g(e);let c=l(2);return f(c.navigateToLesson(c.previousLesson.id))}),x(),o(1,"svg",26),p(2,"path",27),r(),L(),o(3,"span"),a(4),r()()}if(n&2){let e=l(2);i(4),m(e.previousLesson.title)}}function A(n,t){if(n&1){let e=_();o(0,"button",28),h("click",function(){g(e);let c=l(2);return f(c.navigateToLesson(c.nextLesson.id))}),o(1,"span"),a(2),r(),x(),o(3,"svg",26),p(4,"path",29),r()()}if(n&2){let e=l(2);i(2),m(e.nextLesson.title)}}function B(n,t){if(n&1&&(o(0,"div",3)(1,"div",4)(2,"nav",5)(3,"ol",6)(4,"li")(5,"a",7),a(6,"Tutorials"),r()(),o(7,"li"),a(8,"/"),r(),u(9,j,3,4,"li",8),o(10,"li"),a(11,"/"),r(),o(12,"li",9),a(13),r()()(),u(14,F,4,2,"div",10)(15,N,3,1,"div",10)(16,H,2,1,"div",11),o(17,"div",12),u(18,z,5,1,"button",13),o(19,"a",14),a(20," Back to Module "),r(),u(21,A,5,1,"button",15),r()()()),n&2){let e=l();i(9),s("ngIf",e.module),i(4),m(e.currentLesson==null?null:e.currentLesson.title),i(),s("ngIf",e.currentLesson),i(),s("ngIf",e.currentLesson&&e.currentLesson.videoUrl),i(),s("ngIf",e.currentLesson),i(2),s("ngIf",e.previousLesson),i(),s("routerLink",b(8,R,e.moduleId)),i(2),s("ngIf",e.nextLesson)}}function G(n,t){n&1&&(o(0,"div",30),p(1,"div",31),r())}function U(n,t){if(n&1&&(o(0,"div",3)(1,"div",4)(2,"div",32)(3,"p",33),a(4),r()()()()),n&2){let e=l();i(4),m(e.error)}}var $=class n{constructor(t,e){this.route=t;this.tutorialService=e}moduleId;lessonId;module=null;currentLesson=null;lessons=[];previousLesson=null;nextLesson=null;loading=!0;error=null;ngOnInit(){this.route.params.subscribe(t=>{let e=t.moduleId,d=t.lessonId;e&&d?(this.moduleId=+e,this.lessonId=+d,this.loadLessonData()):(this.error="Invalid lesson parameters.",this.loading=!1)})}loadLessonData(){this.loading=!0,this.error=null,this.tutorialService.getModuleLessons(this.moduleId).subscribe({next:t=>{this.lessons=t,this.currentLesson=t.find(e=>e.id===this.lessonId)||null,this.currentLesson?(this.setupNavigation(),this.loadModuleInfo()):(this.error="Lesson not found.",this.loading=!1)},error:t=>{this.error="Failed to load lesson. Please try again later.",this.loading=!1,console.error("Error loading lesson:",t)}})}loadModuleInfo(){this.tutorialService.getModules().subscribe({next:t=>{this.module=t.find(e=>e.id===this.moduleId)||null,this.loading=!1},error:t=>{console.error("Error loading module info:",t),this.loading=!1}})}setupNavigation(){let t=this.lessons.findIndex(e=>e.id===this.lessonId);t>0&&(this.previousLesson=this.lessons[t-1]),t<this.lessons.length-1&&(this.nextLesson=this.lessons[t+1])}navigateToLesson(t){this.lessonId=t,this.loadLessonData(),window.history.replaceState({},"",`/tutorials/modules/${this.moduleId}/lessons/${t}`)}getVideoEmbedUrl(t){return t.includes("youtube.com/watch?v=")?`https://www.youtube.com/embed/${t.split("v=")[1].split("&")[0]}`:t.includes("youtu.be/")?`https://www.youtube.com/embed/${t.split("youtu.be/")[1].split("?")[0]}`:t}getFormattedContent(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/^/,"<p>").replace(/$/,"</p>")}static \u0275fac=function(e){return new(e||n)(v(E),v(O))};static \u0275cmp=w({type:n,selectors:[["app-lesson-view"]],decls:4,vars:3,consts:[["loadingTemplate",""],["class","container mx-auto px-4 py-8",4,"ngIf","ngIfElse"],["class","container mx-auto px-4 py-8",4,"ngIf"],[1,"container","mx-auto","px-4","py-8"],[1,"max-w-4xl","mx-auto"],[1,"mb-6"],[1,"flex","items-center","space-x-2","text-sm","text-gray-500"],["routerLink","/tutorials",1,"hover:text-minecraft-green"],[4,"ngIf"],[1,"text-gray-700"],["class","mb-8",4,"ngIf"],["class","prose prose-lg max-w-none mb-8",4,"ngIf"],[1,"flex","justify-between","items-center","pt-8","border-t","border-gray-200"],["class","flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded transition-colors duration-200",3,"click",4,"ngIf"],[1,"bg-minecraft-green","text-white","px-4","py-2","rounded","hover:bg-minecraft-dark","transition-colors","duration-200",3,"routerLink"],["class","flex items-center space-x-2 bg-minecraft-green text-white px-4 py-2 rounded hover:bg-minecraft-dark transition-colors duration-200",3,"click",4,"ngIf"],[1,"hover:text-minecraft-green",3,"routerLink"],[1,"mb-8"],[1,"text-4xl","font-bold","text-minecraft-green","mb-2"],["class","text-gray-600",4,"ngIf"],[1,"text-gray-600"],[1,"aspect-video","bg-gray-100","rounded-lg","overflow-hidden"],["frameborder","0","allowfullscreen","","title","Tutorial Video",1,"w-full","h-full",3,"src"],[1,"prose","prose-lg","max-w-none","mb-8"],[3,"innerHTML"],[1,"flex","items-center","space-x-2","bg-gray-100","hover:bg-gray-200","px-4","py-2","rounded","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"flex","items-center","space-x-2","bg-minecraft-green","text-white","px-4","py-2","rounded","hover:bg-minecraft-dark","transition-colors","duration-200",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-minecraft-green"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"text-red-600"]],template:function(e,d){if(e&1&&u(0,B,22,10,"div",1)(1,G,2,0,"ng-template",null,0,T)(3,U,5,1,"div",2),e&2){let c=y(2);s("ngIf",!d.loading)("ngIfElse",c),i(3),s("ngIf",d.error)}},dependencies:[k,S,P,V],styles:[".prose[_ngcontent-%COMP%]{color:#374151}.prose[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#1f2937}.prose[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#f3f4f6;padding:.125rem .25rem;border-radius:.25rem;font-size:.875em}.prose[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background-color:#1f2937;color:#f9fafb;padding:1rem;border-radius:.5rem;overflow-x:auto}"]})};export{$ as LessonViewComponent};
